{"ast":null,"code":"import _classCallCheck from \"D:\\\\ELK_6.5_LM\\\\logr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\ELK_6.5_LM\\\\logr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\ELK_6.5_LM\\\\logr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\ELK_6.5_LM\\\\logr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\ELK_6.5_LM\\\\logr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\ELK_6.5_LM\\\\logr\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\ELK_6.5_LM\\\\logr\\\\src\\\\Modules\\\\Report\\\\Analytics.js\";\nimport React, { Component } from 'react';\nimport { Button, FormGroup, FormControl, ControlLabel, Grid, Row, Col, Tooltip, OverlayTrigger } from 'react-bootstrap';\nimport './../../resources/styles/style.css';\nimport './Report.css';\nimport Label from './../../components/Label.js';\nimport TextBox from './../../components/TextBox.js';\nimport { Animated } from \"react-animated-css\";\nimport Iframe from 'react-iframe';\nimport Header from './../../components/Header.js';\nimport Config from '../Config/Config.js';\nimport SmoothieComponent from 'react-smoothie';\nimport axios from 'axios';\nimport Chart from 'react-google-charts';\nimport Loader from 'react-loader-spinner';\nimport API from './../../Config/api.json'; // import {PieChart} from 'react-easy-chart';\n\nimport { PieChart, BarChart, Legend, ResponsiveContainer } from 'react-easy-chart';\nimport ReactSvgPieChart from \"react-svg-piechart\";\nimport Meter from '../../components/meter.js';\nimport Datetime from 'react-datetime';\nimport Modal from 'react-responsive-modal';\nimport Pagination from \"react-js-pagination\";\n\nvar Analytics =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Analytics, _Component);\n\n  function Analytics(props) {\n    var _this;\n\n    _classCallCheck(this, Analytics);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Analytics).call(this, props));\n    _this.state = {\n      loader: false,\n      logInformation: [],\n      logModelOpen: false,\n      applianceHostName: '',\n      applicanceLogLevel: '',\n      appliancesLogs: [],\n      activePage: 1,\n      itemsCountPerPage: 0,\n      totalItemsCount: 0,\n      pageRangeDisplayed: 0,\n      startTime: ''\n    }; //this.bindLoglevels = this.bindLoglevels.bind(this);\n\n    _this.onApplicanceClick = _this.onApplicanceClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onCloseModal = _this.onCloseModal.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onPageChange = _this.onPageChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onApplyTimeClick = _this.onApplyTimeClick.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Analytics, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.bindLoglevels();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {}\n  }, {\n    key: \"onPageChange\",\n    value: function onPageChange(pageNumber) {\n      //console.log(event);\n      this.setState({\n        activePage: pageNumber\n      }); //{logModelOpen:true,applianceHostName:event.target.name, applicanceLogLevel:event.target.value});\n\n      var getLogData = {\n        SYSLOG_HOSTNAME: this.state.applianceHostName,\n        SYSLOG_LOG_LEVEL: this.state.applicanceLogLevel,\n        PAGE_NUMBER: (pageNumber - 1) * 1000\n      };\n      this.getLogs(getLogData);\n    }\n  }, {\n    key: \"bindLoglevels\",\n    value: function bindLoglevels() {\n      var pageObj = this;\n      axios.post(API.current.apiUrl + \"/api/v1/analytics\", {}).then(function (res) {\n        pageObj.setState({\n          logInformation: res.data.data\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"getLogs\",\n    value: function getLogs(appliance) {\n      var pageObj = this;\n      this.setState({\n        appliancesLogs: []\n      });\n      axios.post(API.current.apiUrl + \"/api/v1/logs\", appliance).then(function (res) {\n        console.log(res.data.hits.hits.length);\n        pageObj.setState({\n          appliancesLogs: res.data.hits.hits,\n          totalItemsCount: res.data.hits.total\n        });\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"onApplicanceClick\",\n    value: function onApplicanceClick(event) {\n      console.log(event.target.name);\n      console.log(event.target.value);\n      this.setState({\n        logModelOpen: true,\n        applianceHostName: event.target.name,\n        applicanceLogLevel: event.target.value,\n        activePage: 1\n      });\n      var getLogData = {\n        SYSLOG_HOSTNAME: event.target.name,\n        SYSLOG_LOG_LEVEL: event.target.value,\n        PAGE_NUMBER: 0\n      };\n      this.getLogs(getLogData);\n    }\n  }, {\n    key: \"onCloseModal\",\n    value: function onCloseModal() {\n      this.setState({\n        logModelOpen: false\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(\"div\", {\n        style: {\n          'height': '85vh',\n          'overflowY': 'scroll'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        className: \"override_container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 12,\n        md: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(Label, {\n        text: \"Start Date\",\n        color: \"#000\",\n        size: \"12px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: 12,\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(Datetime, {\n        className: \"datePickerField\",\n        value: this.state.startDate,\n        onChange: this.onStartDateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: 12,\n        md: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Label, {\n        text: \"End Date\",\n        color: \"#000\",\n        size: \"12px\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: 12,\n        md: 3,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(Datetime, {\n        className: \"datePickerField\",\n        value: this.state.endDate,\n        defaultValue: new Date(),\n        onChange: this.onEndDateChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      })), React.createElement(Col, {\n        xs: 12,\n        md: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Button, {\n        bsStyle: \"primary\",\n        className: \"button userPagebtn\",\n        bsSize: \"small\",\n        onClick: this.onApplyTimeClick,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Apply\")))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, this.state.logInformation.map(function (value, index) {\n        return React.createElement(Meter, {\n          logLevelDescription: value.logLevelDescription,\n          totalPackets: value.totalPackets,\n          packetsForLogLevel: value.packetsForLogLevel,\n          key: index,\n          topApplicances: value.topApplicances.SYSLOG_HOSTNAME.buckets,\n          logLevel: value.logLevel,\n          onApplicanceClick: _this2.onApplicanceClick,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        });\n      }))), React.createElement(Modal, {\n        open: this.state.logModelOpen,\n        onClose: this.onCloseModal,\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        style: {\n          width: '100%',\n          height: '90vh'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 12,\n        md: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(\"b\", {\n        style: {\n          fontFamily: 'Times New Roman, Times, serif',\n          textDecoration: 'none',\n          fontSize: '16px',\n          color: '#000'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, \"Showing Logs for:  \", this.state.applianceHostName)), React.createElement(\"div\", {\n        style: {\n          backgroundColor: '#222222',\n          padding: '2px',\n          height: '80vh',\n          overflowY: 'scroll'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, this.state.appliancesLogs.map(function (value, index) {\n        return React.createElement(\"li\", {\n          type: \"none\",\n          style: {\n            fontSize: '10px',\n            color: '#ffffff'\n          },\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, value._source.message);\n      }))))), React.createElement(Row, {\n        className: \"show-grid\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(Col, {\n        xs: 12,\n        md: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(Pagination, {\n        activePage: this.state.activePage,\n        itemsCountPerPage: 1000,\n        totalItemsCount: this.state.totalItemsCount,\n        pageRangeDisplayed: 15,\n        onChange: this.onPageChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }))))));\n    }\n  }]);\n\n  return Analytics;\n}(Component);\n\nexport default Analytics;","map":{"version":3,"sources":["D:\\ELK_6.5_LM\\logr\\src\\Modules\\Report\\Analytics.js"],"names":["React","Component","Button","FormGroup","FormControl","ControlLabel","Grid","Row","Col","Tooltip","OverlayTrigger","Label","TextBox","Animated","Iframe","Header","Config","SmoothieComponent","axios","Chart","Loader","API","PieChart","BarChart","Legend","ResponsiveContainer","ReactSvgPieChart","Meter","Datetime","Modal","Pagination","Analytics","props","state","loader","logInformation","logModelOpen","applianceHostName","applicanceLogLevel","appliancesLogs","activePage","itemsCountPerPage","totalItemsCount","pageRangeDisplayed","startTime","onApplicanceClick","bind","onCloseModal","onPageChange","onApplyTimeClick","bindLoglevels","pageNumber","setState","getLogData","SYSLOG_HOSTNAME","SYSLOG_LOG_LEVEL","PAGE_NUMBER","getLogs","pageObj","post","current","apiUrl","then","res","data","catch","err","console","log","appliance","hits","length","total","event","target","name","value","startDate","onStartDateChange","endDate","Date","onEndDateChange","map","index","logLevelDescription","totalPackets","packetsForLogLevel","topApplicances","buckets","logLevel","width","height","textAlign","fontFamily","textDecoration","fontSize","color","backgroundColor","padding","overflowY","_source","message"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Button, FormGroup, FormControl, ControlLabel, Grid, Row, Col, Tooltip, OverlayTrigger} from 'react-bootstrap';\r\nimport './../../resources/styles/style.css';\r\nimport './Report.css';\r\nimport Label from './../../components/Label.js';\r\nimport TextBox from './../../components/TextBox.js';\r\nimport {Animated} from \"react-animated-css\";\r\nimport Iframe from 'react-iframe';\r\nimport Header from './../../components/Header.js';\r\nimport Config from '../Config/Config.js';\r\nimport SmoothieComponent from 'react-smoothie';\r\nimport axios from 'axios';\r\nimport Chart from 'react-google-charts';\r\nimport Loader from 'react-loader-spinner';\r\nimport API from './../../Config/api.json';\r\n// import {PieChart} from 'react-easy-chart';\r\nimport {PieChart, BarChart, Legend, ResponsiveContainer} from 'react-easy-chart';\r\nimport ReactSvgPieChart from \"react-svg-piechart\";\r\nimport Meter from '../../components/meter.js';\r\nimport Datetime  from 'react-datetime';\r\nimport Modal from 'react-responsive-modal';\r\nimport Pagination from \"react-js-pagination\";\r\n\r\nclass Analytics extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {loader:false,\r\n      logInformation:[],\r\n      logModelOpen:false,\r\n      applianceHostName:'',\r\n      applicanceLogLevel:'',\r\n      appliancesLogs:[],\r\n      activePage:1,\r\n      itemsCountPerPage:0,\r\n      totalItemsCount:0,\r\n      pageRangeDisplayed:0,\r\n      startTime:''};\r\n    //this.bindLoglevels = this.bindLoglevels.bind(this);\r\n    this.onApplicanceClick = this.onApplicanceClick.bind(this);\r\n    this.onCloseModal = this.onCloseModal.bind(this);\r\n    this.onPageChange = this.onPageChange.bind(this);\r\n    this.onApplyTimeClick = this.onApplyTimeClick.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.bindLoglevels();\r\n  }\r\n\r\n  componentWillUnmount()\r\n  {\r\n\r\n  }\r\n\r\n  onPageChange(pageNumber)\r\n  {\r\n    //console.log(event);\r\n    this.setState({activePage:pageNumber});\r\n    //{logModelOpen:true,applianceHostName:event.target.name, applicanceLogLevel:event.target.value});\r\n    let getLogData = {SYSLOG_HOSTNAME:this.state.applianceHostName,SYSLOG_LOG_LEVEL:this.state.applicanceLogLevel, PAGE_NUMBER:((pageNumber-1)*1000)};\r\n    this.getLogs(getLogData);\r\n  }\r\n\r\n  bindLoglevels()\r\n  {\r\n    let pageObj = this;\r\n    axios.post(API.current.apiUrl+\"/api/v1/analytics\",{}).then(function(res)\r\n    {\r\n        pageObj.setState({logInformation:res.data.data});\r\n    }).catch(function(err){\r\n        console.log(err);\r\n    })\r\n  }\r\n\r\n  getLogs(appliance)\r\n  {\r\n    let pageObj = this;\r\n    this.setState({appliancesLogs:[]});\r\n    axios.post(API.current.apiUrl+\"/api/v1/logs\",appliance).then(function(res)\r\n    {\r\n        console.log(res.data.hits.hits.length);\r\n        pageObj.setState({appliancesLogs:res.data.hits.hits,totalItemsCount:res.data.hits.total});\r\n    }).catch(function(err){\r\n        console.log(err);\r\n    })\r\n  }\r\n\r\n  onApplicanceClick(event)\r\n  {\r\n    console.log(event.target.name);\r\n    console.log(event.target.value);\r\n    this.setState({logModelOpen:true, applianceHostName:event.target.name, applicanceLogLevel:event.target.value, activePage:1});\r\n    let getLogData = {SYSLOG_HOSTNAME:event.target.name,SYSLOG_LOG_LEVEL:event.target.value, PAGE_NUMBER:0};\r\n    this.getLogs(getLogData);\r\n  }\r\n\r\n  onCloseModal()\r\n  {\r\n    this.setState({logModelOpen:false});\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n        <div style={{'height':'85vh', 'overflowY':'scroll'}}>\r\n          <Grid className=\"override_container\">\r\n              <Row className=\"show-grid\">\r\n                <Col xs={12} md={2}>\r\n                  <Label text={\"Start Date\"} color={\"#000\"} size={\"12px\"}></Label>\r\n                </Col>\r\n                <Col xs={12} md={3}>\r\n                      <Datetime className=\"datePickerField\" value={this.state.startDate} onChange={this.onStartDateChange}/>\r\n                </Col>\r\n                <Col xs={12} md={2}>\r\n                  <Label text={\"End Date\"} color={\"#000\"} size={\"12px\"}></Label>\r\n                </Col>\r\n                <Col xs={12} md={3}>\r\n                      <Datetime className=\"datePickerField\" value={this.state.endDate} defaultValue={new Date()} onChange={this.onEndDateChange}/>\r\n                </Col>\r\n                <Col xs={12} md={2}>\r\n                  <Button bsStyle=\"primary\" className=\"button userPagebtn\" bsSize=\"small\" onClick={this.onApplyTimeClick}>\r\n                    Apply\r\n                  </Button>\r\n                </Col>\r\n              </Row>\r\n            </Grid>\r\n\r\n            <div>\r\n              <div>\r\n                    {this.state.logInformation.map((value, index) => {\r\n                      return <Meter logLevelDescription={value.logLevelDescription} totalPackets={value.totalPackets} packetsForLogLevel={value.packetsForLogLevel} key={index}\r\n                        topApplicances={value.topApplicances.SYSLOG_HOSTNAME.buckets} logLevel={value.logLevel} onApplicanceClick={this.onApplicanceClick}></Meter>\r\n                  })}\r\n              </div>\r\n            </div>\r\n\r\n            <Modal open={this.state.logModelOpen} onClose={this.onCloseModal} center>\r\n              <Grid style={{width:'100%', height:'90vh'}}>\r\n                  <Row className=\"show-grid\">\r\n                      <Col xs={12} md={12}>\r\n                        <div style={{textAlign :'center'}}><b style={{fontFamily:'Times New Roman, Times, serif', textDecoration:'none', fontSize:'16px', color:'#000'}}>Showing Logs for:  {this.state.applianceHostName}</b></div>\r\n                            <div style={{backgroundColor:'#222222', padding:'2px', height:'80vh', overflowY:'scroll'}}>\r\n                                  <ul>\r\n                                      {this.state.appliancesLogs.map((value, index)=>{\r\n                                          return <li type=\"none\" style={{fontSize:'10px', color:'#ffffff'}}  key={index}>{value._source.message}</li>\r\n                                      })}\r\n                                  </ul>\r\n                            </div>\r\n                      </Col>\r\n                  </Row>\r\n                  <Row className=\"show-grid\">\r\n                    <Col xs={12} md={12}>\r\n                      <Pagination\r\n                          activePage={this.state.activePage}\r\n                          itemsCountPerPage={1000}\r\n                          totalItemsCount={this.state.totalItemsCount}\r\n                          pageRangeDisplayed={15}\r\n                          onChange={this.onPageChange}\r\n                        />\r\n                    </Col>\r\n                  </Row>\r\n              </Grid>\r\n            </Modal>\r\n        </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Analytics;\r\n"]},"metadata":{},"sourceType":"module"}